---
export interface Props {
  progress: number;
  showLabel?: boolean;
  color?: 'blue' | 'green' | 'purple' | 'yellow' | 'red';
  size?: 'sm' | 'md' | 'lg';
}

const { progress, showLabel = true, color = 'blue', size = 'md' } = Astro.props;

function getColorClasses(color: string): string {
  switch (color) {
    case 'green':
      return 'bg-green-500';
    case 'purple':
      return 'bg-purple-500';
    case 'yellow':
      return 'bg-yellow-500';
    case 'red':
      return 'bg-red-500';
    default:
      return 'bg-blue-500';
  }
}

function getSizeClasses(size: string): string {
  switch (size) {
    case 'sm':
      return 'h-1';
    case 'lg':
      return 'h-4';
    default:
      return 'h-2';
  }
}

// 确保进度值在 0-100 之间
const clampedProgress = Math.max(0, Math.min(100, progress));
---

<div class="w-full">
  {showLabel && (
    <div class="flex justify-between items-center mb-1">
      <span class="text-sm text-gray-600">进度</span>
      <span class="text-sm font-medium text-gray-700">{clampedProgress}%</span>
    </div>
  )}
  <div class={`w-full bg-gray-200 rounded-full ${getSizeClasses(size)}`}>
    <div 
      class={`${getColorClasses(color)} ${getSizeClasses(size)} rounded-full transition-all duration-500 ease-out`}
      style={`width: ${clampedProgress}%`}
    ></div>
  </div>
</div>