---
import { Icon } from "astro-icon/components";
import MainGridLayout from "../layouts/MainGridLayout.astro";
import { getCollection } from "astro:content";

// 从content文件夹获取收藏夹数据
const bookmarksEntries = await getCollection("bookmarks");
// 按order字段排序
const bookmarks = bookmarksEntries
  .sort((a, b) => (a.data.order || 0) - (b.data.order || 0))
  .map(entry => entry.data);
---

<MainGridLayout title="收藏夹" description="收集整理的常用网站和工具，方便快速访问">
  <div class="flex w-full rounded-[var(--radius-large)] overflow-hidden relative min-h-32">
    <div class="card-base z-10 px-6 md:px-9 py-6 relative w-full">
      <!-- 页面标题 -->
      <div class="text-center mb-8">
        <h1 class="text-3xl font-bold text-[var(--primary)] mb-4">我的收藏夹</h1>
        <p class="text-lg text-75">收集整理的常用网站和工具，方便快速访问</p>
      </div>

      <!-- 收藏夹内容 -->
      <div class="space-y-10">
        {bookmarks.map((category) => (
          <div class="bookmark-category">
            <h2 class="category-title">{category.category}</h2>
            <div class="bookmark-grid">
              {category.items.map((item) => (
                <a 
                  href={item.url} 
                  target="_blank" 
                  rel="noopener noreferrer"
                  class="bookmark-card"
                >
                  <div class={`bookmark-icon ${item.color}`}>
                    <Icon name={item.icon} size={24} />
                  </div>
                  <div class="bookmark-content">
                    <h3 class="bookmark-title">{item.name}</h3>
                    <p class="bookmark-description">{item.description}</p>
                  </div>
                  <div class="bookmark-external">
                    <Icon name="material-symbols:open-in-new" size={16} />
                  </div>
                </a>
              ))}
            </div>
          </div>
        ))}
      </div>

      <!-- 使用说明 -->
      <div class="mt-12 p-6 bg-[var(--btn-regular-bg)] rounded-lg">
        <div class="flex items-center justify-center gap-3">
          <Icon name="material-symbols:info-outline" class="w-5 h-5 text-[var(--primary)]" />
          <span class="text-sm font-medium text-75">点击卡片即可访问对应网站</span>
        </div>
      </div>
    </div>
  </div>
</MainGridLayout>

<style>
  .bookmark-category {
    margin-bottom: 2.5rem;
  }

  .category-title {
    font-size: 1.5rem;
    font-weight: 600;
    margin-bottom: 1.5rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    color: var(--text-90);
  }

  .category-title::before {
    content: '';
    width: 4px;
    height: 2rem;
    background: var(--primary);
    border-radius: 9999px;
  }

  .bookmark-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 1.5rem;
  }

  .bookmark-card {
    display: block;
    padding: 1.5rem;
    background: var(--card-bg);
    border: 1px solid var(--line-divider);
    border-radius: 0.5rem;
    text-decoration: none;
    transition: all 0.3s ease;
    position: relative;
  }

  .bookmark-card:hover {
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    transform: translateY(-2px);
  }

  .bookmark-icon {
    width: 3rem;
    height: 3rem;
    border-radius: 0.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    margin-bottom: 1rem;
    transition: transform 0.3s ease;
  }

  .bookmark-card:hover .bookmark-icon {
    transform: scale(1.1);
  }

  .bookmark-title {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--text-90);
    margin-bottom: 0.5rem;
    transition: color 0.3s ease;
  }

  .bookmark-card:hover .bookmark-title {
    color: var(--primary);
  }

  .bookmark-description {
    font-size: 0.875rem;
    color: var(--text-75);
    line-height: 1.5;
    margin-bottom: 1rem;
  }

  .bookmark-external {
    position: absolute;
    top: 1rem;
    right: 1rem;
    color: var(--btn-content);
    transition: color 0.3s ease;
  }

  .bookmark-card:hover .bookmark-external {
    color: var(--primary);
  }
</style>