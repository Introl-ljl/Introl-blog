---
title: 平衡树学习记录
published: 2025-08-20
description: 记录学习平衡树相关的Treap，FHQ-Treap，Splay等数据结构时的思路，代码及例题题解。
tags: ['算法', '数据结构', '学习记录']
category: 学习笔记
draft: false
---
# 平衡树学习记录
## 二叉搜索树

### 定义

二叉搜索树是一种二叉树形数据结构，定义为：

- 空树是二叉搜索树。
- 若二叉搜索树的左子树不为空，则左子树中的所有点的值都小于根节点的值。
- 若二叉搜索树的右子树不为空，则右子树中的所有点的值都大于根节点的值。
- 二叉搜索树的左右子树均为二叉搜索树。

### 基本操作

根据定义可以发现，二叉搜索树可以维护一些操作。

#### 查找最大/最小值

显然根据定义，最小值为搜索树的最左子链的顶点；最大值为搜索树的最右子链的顶点。

#### 搜索元素

如果我们要查找一个元素，可以从根节点出发，

如果当前节点大于所查找的节点，那么向左子树去查找；

如果当前节点小于所查找的节点，那么向右子树去查找。

直到根节点就为所查找的元素。

#### 插入元素

如果我们要插入一个元素，显然和搜索的逻辑一致，可以从根节点出发，

如果当前节点大于插入元素，那么插入左子树；

如果当前节点小于插入元素，那么插入右子树。

如果当前节点等于插入元素，该节点的值次数增加 $1$ 。

如果当前节点为空，则插入此节点。

#### 求元素排名

显然根据二叉搜索树的性质可得，我们可以首先从根节点一路跳到目标节点。

过程中，如果向右跳，则最终的答案要加上当前节点的左子树大小+当前节点重复次数。

最后的答案加上目标节点左子树的大小 $+1$ 即可。

#### 查找排名为 k 的元素

同理按照求元素排名的方法递归即可。

#### 性质

- 由定义可得，二叉搜索树的中序遍历可以得到一个非递减序列。

### 时间复杂度

显然，二叉搜索树的基本操作的时间复杂度只与树的高度成正比，即为复杂度  $O(h)$。

而对于一个 $n$ 个节点的二叉搜索树，其最优复杂度可以达到 $O(\log n)$，但最坏复杂度会退化为 $O(n)$。

